<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description"
    content="Probably the most complete UI kit out there. Multiple functionalities and controls added,  extended color palette and beautiful typography, designed as its own extended version of Bootstrap at  the highest level of quality.                             ">
  <meta name="author" content="Webpixels">
  <title>TimeSheet</title>
  <!-- Fonts -->
  <link th:href="@{https://fonts.googleapis.com/css?family=Nunito:400,600,700,800|Roboto:400,500,700}" rel="stylesheet">
  <!-- Theme CSS -->
  <link type="text/css" th:href="@{/assets/css/theme.css}" rel="stylesheet">
  <!-- Demo CSS - No need to use these in your project -->
  <link type="text/css" th:href="@{/assets/css/demo.css}" rel="stylesheet">
</head>
<main class="main">
  <aside class="sidebar" id="nav_docs">
    <div class="sidebar-brand">
      <h1 class="font-weight-400"><span class="font-weight-700">TimeSheet</span> Mangager Tools</a></h1>
    </div>
    <div class="scrollbar-inner">
      <ul class="navigation pr-3">
        <li class="navigation-title">Auth Manager</li>
        <li class="navigation-item">
          <a th:href="@{/manager/page/authowner}" class="navigation-link">As Project Owner</a>
        </li>
        <li class="navigation-title">Profile Info Manager</li>
        <li class="navigation-item">
          <a th:href="@{/manager/page/projectowner}" class="navigation-link">As Project Owner</a>
        </li>
        <li class="navigation-item">
          <a th:href="@{/manager/page/mangagerowner}" class="navigation-link">As Manager Line</a>
        </li>
        <li class="navigation-title">TimeSheet Info Manager</li>
        <li class="navigation-item">
          <a th:href="@{/manager/page/thNew}" class="navigation-link">New TimeSheet</a>
          <a th:href="@{/manager/page/thProgress}" class="navigation-link">TimeSheet In Progress</a>
          <a th:href="@{/manager/page/thDone}" class="navigation-link">TimeSheet Finished</a>
        </li>
        <li class="navigation-title">Request Info Manager</li>
        <li class="navigation-item">
          <a th:href="@{/manager/page/requestPending}" class="navigation-link">Pending Request</a>
          <a th:href="@{/manager/page/requestDenyed}" class="navigation-link">Denyed Request</a>
          <a th:href="@{/manager/page/requestAllowed}" class="navigation-link">Allowed Request</a>
        </li>
      </ul>
    </div>
  </aside>
  <section class="content">
    <div class="header">
      <div class="navigation-trigger d-xl-none" data-action="aside-open" data-target=".sidebar">
        <div class="navigation-trigger-inner">
          <i class="navigation-trigger-line"></i>
          <i class="navigation-trigger-line"></i>
          <i class="navigation-trigger-line"></i>
        </div>
      </div>
      <div class="header-brand d-xl-none">
        <h1>TimeSheet Mangager Tools</a></h1>
      </div>
      <div class="header-nav ml-auto">
        <ul class="nav align-items-center">
          <li class="nav-item d-none d-md-inline-block">
            <span class="avatar avatar-lg bg-blue mr-3" th:text="${session.loginUser.nameZh}"></span>
          </li>
          <li class="nav-item ml-4">
            <button type="button" class="btn btn-primary">
              Notifications <span class="badge badge-light ml-2">4</span>
            </button>
          </li>
          <li class="nav-item d-none d-md-inline-block">
            <a class="nav-link" th:href="@{/manager/page/logout}">Logout</a>
          </li>
        </ul>
      </div>
    </div>
    <section class="slice slice-lg bg-tertiary bg-cover bg-size--contain"
      th:style=" 'background-image: url('+ @{/assets/images/backgrounds/img-1.png} +') background-position: center 10%;'">
      <span class="mask bg-primary alpha-7"></span>
      <div class="container text-center">
        <div class="row cols-xs-space cols-sm-space cols-md-space">
          <div class="col-12">
            <h2 class="heading text-white h1 strong-600">
              Complete features at your hand
            </h2>
            <div class="row justify-content-center mt-4">
              <div class="col-lg-8">
                <p class="lead text-white">
                  Boomerang is a great free UI package based on Bootstrap 4 that includes the most important components
                  and features so you can jumpstart the hard work and get right to the website creation fast and easy.
                </p>
                <div class="btn-container mt-5">
                  <a href="https://github.com/webpixels/boomerang-ui-kit/archive/master.zip"
                    class="btn btn-lg bg-white px-4">
                    Download Free
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section style="float: right;">
      <button type="button" class="btn btn-sm btn-outline-primary btn-icon" data-toggle="modal" data-target="#modal_1"
        id="createProfileBtn">
        <span class="btn-inner--text">Create Account</span>
        <span class="btn-inner--icon"><i class="fas fa-user"></i></span>
      </button>
      <button type="button" class="btn btn-sm btn-outline-danger btn-icon" data-toggle="modal" data-target="#modal_1"
        id="removeProfileBtn">
        <span class="btn-inner--text">Deactivate</span>
        <span class="btn-inner--icon"><i class="fas fa-user-times"></i></span>
      </button>
      <button type="button" class="btn btn-sm btn-outline-primary btn-icon" data-toggle="modal" data-target="#modal_1"
        id="createProjectBtn">
        <span class="btn-inner--text">Create Project</span>
        <span class="btn-inner--icon"><i class="fas fa-user"></i></span>
      </button>
      <button type="button" class="btn btn-sm btn-outline-danger btn-icon" data-toggle="modal" data-target="#modal_1"
        id="removeProjectBtn">
        <span class="btn-inner--text">Deactivate</span>
        <span class="btn-inner--icon"><i class="fas fa-user-times"></i></span>
      </button>
      <button type="button" class="btn btn-sm btn-outline-secondary btn-icon" id="projectInfo">
        <span class="btn-inner--text">Manager Project Info</span>
        <span class="btn-inner--icon"><i class="fas fa-arrow-right"></i></span>
      </button>
      <button type="button" class="btn btn-sm btn-outline-secondary btn-icon" id="profileInfo">
        <span class="btn-inner--text">Profile Info</span>
        <span class="btn-inner--icon"><i class="fas fa-arrow-right"></i></span>
      </button>
      <!-- popup with from -->
      <div class="modal modal-fluid fade" id="modal_1" tabindex="-1" role="dialog" aria-labelledby="modal_1"
        aria-hidden="true">

      </div>
    </section>
    <table class="table table-hover align-items-center" id="profileTable">
    </table>
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-block btn-danger" data-toggle="modal" data-target="#modal_5" hidden="true"
      id="noAccessPopUp">
      Danger modal
    </button>
    <!-- Modal -->
    <div class="modal modal-danger fade" id="modal_5" tabindex="1" role="dialog" aria-labelledby="modal_5"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="modal_title_6">Notification</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <div class="py-3 text-center">
              <i class="fas fa-exclamation-circle fa-4x"></i>
              <h4 class="heading mt-4" id="errorMsg"></h4>
              <p>
                You can easy create stackable modal boxes. For example, your inline content or Ajax response can contain
                a gallery:
              </p>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal">Got it</button>
          </div>
        </div>
      </div>
    </div>
    <section class="slice slice-lg">

      <div class="container">
        <div class="mb-5 text-center">
          <h3 class="heading h2">Stay tuned with our company news</h3>
          <div class="fluid-paragraph text-center">
            <p class="lead mb-0">Daily insights from our company</p>
          </div>
        </div>
        <div class="row cols-md-space cols-sm-space cols-xs-space">
          <div class="col-lg-4">
            <div class="card border-0">
              <img th:src="@{/assets/images/prv/img-1-800x600.jpg}" class="img-fluid img-center rounded z-depth-2">
              <div class="pt-4">
                <span class="text-muted">Oct 15, 2018</span>
                <a href="#" class="heading h4 d-block mt-1">Listen to the nature</a>
                <p class="mt-3">
                  When we strive to become better than we are, everything around us becomes better, too.
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card border-0">
              <img th:src="@{/assets/images/prv/img-2-800x600.jpg}" class="img-fluid img-center rounded z-depth-2">
              <div class="pt-4">
                <span class="text-muted">Oct 15, 2018</span>
                <a href="#" class="heading h4 d-block mt-1">Listen to the nature</a>
                <p class="mt-3">
                  When we strive to become better than we are, everything around us becomes better, too.
                </p>
              </div>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card border-0">
              <img th:src="@{/assets/images/prv/img-3-800x600.jpg}" class="img-fluid img-center rounded z-depth-2">
              <div class="pt-4">
                <span class="text-muted">Oct 15, 2018</span>
                <a href="#" class="heading h4 d-block mt-1">Listen to the nature</a>
                <p class="mt-3">
                  When we strive to become better than we are, everything around us becomes better, too.
                </p>
              </div>
            </div>
          </div>
        </div>
        <div class="text-center mt-5">
          <a href="#" class="text-uppercase">
            All posts
            <i class="fas fa-arrow-right ml-2"></i>
          </a>
        </div>
      </div>
    </section>
  </section>
</main>
<footer class="pt-5 pb-3 footer  footer-dark bg-tertiary">
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-4">
        <div class="pr-lg-5">
          <h1 class="heading h6 text-uppercase font-weight-700 mb-3"><strong>Boomerang</strong> UI Kit</h1>
          <p>Boomerang is a high quality UI Kit built on top of the well known Bootstrap 4 Framework. This theme was
            designed as its own extended version of Bootstrap with multiple functionalities and controls added, extended
            color palette and beautiful typography.</p>
        </div>
      </div>
      <div class="col-6 col-md">
        <h5 class="heading h6 text-uppercase font-weight-700 mb-3">Features</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" th:href="@{#}">Cool stuff</a></li>
          <li><a class="text-muted" th:href="@{#}">Random feature</a></li>
          <li><a class="text-muted" th:href="@{#}">Team feature</a></li>
          <li><a class="text-muted" th:href="@{#}">Stuff for developers</a></li>
          <li><a class="text-muted" th:href="@{#}">Another one</a></li>
          <li><a class="text-muted" th:href="@{#}">Last time</a></li>
        </ul>
      </div>
      <div class="col-6 col-md">
        <h5 class="heading h6 text-uppercase font-weight-700 mb-3">Solutions</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" th:href="@{#}">Resource</a></li>
          <li><a class="text-muted" th:href="@{#}">Resource name</a></li>
          <li><a class="text-muted" th:href="@{#}">Another resource</a></li>
          <li><a class="text-muted" th:href="@{#}">Final resource</a></li>
        </ul>
      </div>
      <div class="col-6 col-md">
        <h5 class="heading h6 text-uppercase font-weight-700 mb-3">Resources</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" th:href="@{#}">Business</a></li>
          <li><a class="text-muted" th:href="@{#}">Education</a></li>
          <li><a class="text-muted" th:href="@{#}">Government</a></li>
          <li><a class="text-muted" th:href="@{#}">Gaming</a></li>
        </ul>
      </div>
      <div class="col-6 col-md">
        <h5 class="heading h6 text-uppercase font-weight-700 mb-3">About</h5>
        <ul class="list-unstyled text-small">
          <li><a class="text-muted" th:href="@{#}">Team</a></li>
          <li><a class="text-muted" th:href="@{#}">Locations</a></li>
          <li><a class="text-muted" th:href="@{#}">Privacy</a></li>
          <li><a class="text-muted" th:href="@{#}">Terms</a></li>
        </ul>
      </div>
    </div>
    <hr>
    <div class="d-flex align-items-center">
      <span class="">
        &copy; 2018 <a th:href="@{https://webpixels.io/}" class="footer-link" target="_blank">Webpixels</a>. All rights
        reserved.
      </span>
      <ul class="nav ml-lg-auto">
        <li class="nav-item">
          <a class="nav-link active" th:href="@{https://instagram.com/webpixelsofficial}" target="_blank"><i
              class="fab fa-instagram"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{https://facebook.com/webpixels}" target="_blank"><i
              class="fab fa-facebook"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{https://github.com/webpixels}" target="_blank"><i
              class="fab fa-github"></i></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" th:href="@{https://dribbble.com/webpixels}" target="_blank"><i
              class="fab fa-dribbble"></i></a>
        </li>
      </ul>
    </div>
  </div>
</footer>
<!-- Core -->
<script th:src="@{/assets/vendor/jquery/jquery.min.js}"></script>
<script th:src="@{/assets/vendor/popper/popper.min.js}"></script>
<script th:src="@{/assets/js/bootstrap/bootstrap.min.js}"></script>
<!-- FontAwesome 5 -->
<script th:src="@{/assets/vendor/fontawesome/js/fontawesome-all.min.js}" defer></script>
<!-- Page plugins -->
<script th:src="@{/assets/vendor/bootstrap-select/js/bootstrap-select.min.js}"></script>
<script th:src="@{/assets/vendor/bootstrap-tagsinput/bootstrap-tagsinput.min.js}"></script>
<script th:src="@{/assets/vendor/input-mask/input-mask.min.js}"></script>
<script th:src="@{/assets/vendor/nouislider/js/nouislider.min.js}"></script>
<script th:src="@{/assets/vendor/textarea-autosize/textarea-autosize.min.js}"></script>
<!-- Theme JS -->
<script th:src="@{/assets/js/theme.js}"></script>
<script>

  // create project
  $("#createProjectBtn").on("click", function () {
    $("#modal_1").empty();
    $("#modal_1").append("<div class='modal-dialog modal-lg' role='document'><div class='modal-content'><div class='modal-body'><div class='row justify-content-center'><div class='col-lg-8 text-center py-4'><h4 class='heading h3'>Create The New Project!</h4><p class='lead text-muted'>You can easy create stackable modal boxes. For example, your inline content or Ajax response can contain a gallery:</p><div class='form-group'><input type='text' id='createProjectProjectCode' class='form-control border-0' placeholder='Project Code'></div><div class='form-group'><input type='text' id='createProjectProjectName' class='form-control border-0' placeholder='Project Name'></div><div class='form-group'><input type='text' id='createProjectExpireDate' class='form-control border-0' placeholder='Expire Date'></div><button type='button' class='btn btn-primary' onclick='createProjectSub()'>Create Project</button></div></div></div></div></div>")
  })


  var createProjectSub = function () {
    let input = {
      projectCode: $("#createProjectProjectCode").val(),
      projectName: $("#createProjectProjectName").val(),
      expireDate: new Date($("#createProjectExpireDate").val())
    }
    console.log(input)
    $.ajax(
      {
        type: "POST",
        contentType: "application/json",
        data: JSON.stringify(input),
        url: "/manager/profile/createProject",
        success: function (data) {
          if (data.code == '200') {
            $("#projectInfo").click()
          }
          else {
            $("#accessTbody").empty();
            $("#errorMsg").text("Opps, Update Error,Please Retry!");
            $("#noAccessPopUp").click();
          }
        },
        error: function (data) {
          $("#accessTbody").empty();
          $("#errorMsg").text("Opps, Update Error,Please Retry!");
          $("#noAccessPopUp").click();
        }
      })
  }

  //profile && project change
  $("#profileInfo").on("click", function () {
    $.ajax(
      {
        type: 'GET',
        dataType: "json",
        url: "/manager/auth/check?type=profile_access",
        success: function (data) {
          if (data.code == '006') {
            $("#errorMsg").text("You do not have access to find this info!");
            $("#noAccessPopUp").click();
          } else if (data.code == '200') {
            $("#createProjectBtn").hide();
            $("#profileInfo").hide();
            $("#removeProjectBtn").hide();
            $("#removeProfileBtn").show();
            $("#projectInfo").show();
            $("#createProfileBtn").show();
            $("#profileTable").empty();
            let table = "<thead><tr><th scope='col'>Name</th><th scope='col'>Account Num</th><th scope='col'>Manager Id</th><th scope='col'>Manager Name</th><th scope='col'>Perm</th><th scope='col'>Join Date</th><th scope='col'>Expire Date</th><th scope='col'>Delete Flag</th><th scope='col'>Project Code</th><th scope='col'>Proportion</th><th scope='col'>Project Name</th><th scope='col'>Project Expire Date</th><th scope='col'>Edit</th><th scope='col'>Delete</th></tr></thead><tbody id='profileTbody'></tbody>"
            $("#profileTable").append(table);
            let context;
            context += ""
            $("#profileTbody").append(context);
          }
        },
        error: function (data) {
          $("#accessTbody").empty();
          $("#errorMsg").text("Opps,Connect Error Happen Please Retry!");
          $("#noAccessPopUp").click();
        }
      });
  });

  $("#projectInfo").on("click", function () {
    $.ajax(
      {
        type: 'GET',
        dataType: "json",
        url: "/manager/auth/check?type=profile_access",
        success: function (data) {
          if (data.code == '006') {
            $("#errorMsg").text("You do not have access to find this info!");
            $("#noAccessPopUp").click();
          } else if (data.code == '200') {
            $("#createProjectBtn").show();
            $("#profileInfo").show();
            $("#removeProjectBtn").show();
            $("#removeProfileBtn").hide();
            $("#projectInfo").hide();
            $("#createProfileBtn").hide();
            $("#profileTable").empty();
            let table;
            table += "<thead><tr><th scope='col'>Project Id</th><th scope='col'>Project Code</th><th scope='col'>Project Name</th><th scope='col'>Expire Date</th><th scope='col'>Edit</th><th scope='col'>Delete</th></tr></thead><tbody id='profileTbody'></tbody>"
            $("#profileTable").append(table);
            let context;
            $.ajax({
              type: 'GET',
              dataType: "json",
              url: "/manager/profile/projectList",
              success: function (data) {
                if (data.code == '200') {
                  context = ""
                  for (i = 0; i < data.data.length; i++) {
                    context += "<tr class='bg-white' scope='row'>"
                      + "<td>" + data.data[i].id + "</td>"
                      + "<td>" + data.data[i].projectCode + "</td>"
                      + "<td>" + data.data[i].projectName + "</td>"
                      + "<td>" + data.data[i].expireDate + "</td>"
                      + "<td><button type='button' class='btn btn-primary btn-icon-only' id=" + data.data[i].id + "' data-toggle='modal' data-target='#modal_1'>"
                      + "<span class='btn-inner--icon'><i class='fas fa-user'></i></span></button></td>"
                      + "<td><button type='button' class='btn btn-danger btn-icon-only' id=" + data.data[i].id + "' data-toggle='modal' data-target='#modal_1'>"
                      + "<span class='btn-inner--icon'><i class='fas fa-trash-alt'></i></span></button></td>"
                  }
                }
                $("#profileTbody").append(context);
              },
              error: function (data) {
                $("#accessTbody").empty();
                $("#errorMsg").text("Opps,Connect Error Happen Please Retry!");
                $("#noAccessPopUp").click();
              }
            })
          }
        },
        error: function (data) {
          $("#accessTbody").empty();
          $("#errorMsg").text("Opps,Connect Error Happen Please Retry!");
          $("#noAccessPopUp").click();
        }
      })
  });

  //jump to this page 
  $.ajax(
    {
      type: 'GET',
      dataType: "json",
      url: "/manager/auth/check?type=profile_access",
      success: function (data) {
        $("#createProjectBtn").hide();
        $("#profileInfo").hide();
        $("#removeProjectBtn").hide();
        if (data.code == '006') {
          $("#errorMsg").text("You do not have access to find this info!");
          $("#noAccessPopUp").click();
        } else if (data.code == '200') {

          let table = "<thead><tr><th scope='col'>Name</th><th scope='col'>Account Num</th><th scope='col'>Manager Id</th><th scope='col'>Manager Name</th><th scope='col'>Perm</th><th scope='col'>Join Date</th><th scope='col'>Expire Date</th><th scope='col'>Delete Flag</th><th scope='col'>Project Code</th><th scope='col'>Proportion</th><th scope='col'>Project Name</th><th scope='col'>Project Expire Date</th><th scope='col'>Edit</th><th scope='col'>Delete</th></tr></thead><tbody id='profileTbody'></tbody>"
          $("#profileTable").append(table);
          let context;
          context += ""
          $("#profileTbody").append(context);
        }
      },
      error: function (data) {
        $("#createProjectBtn").hide();
        $("#profileInfo").hide();
        $("#removeProjectBtn").hide();
        $("#accessTbody").empty();
        $("#errorMsg").text("Opps,Connect Error Happen Please Retry!");
        $("#noAccessPopUp").click();
      }
    });

</script>